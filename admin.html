<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ADMIN</title>
    <link rel="stylesheet" href="styles/admin-dashboard/admin.css" />
    <link rel="stylesheet" href="styles/admin-dashboard/messages.css" />
    <link rel="stylesheet" href="styles/admin-dashboard/joborder.css" />
    <link rel="stylesheet" href="styles/global/global.css" />
  </head>

  <body>
    <aside class="sidebr" aria-label="Sidebr">
      <div class="sidebr-header">PMDL Admin</div>

      <nav class="anav">
        <ul class="Alist" role="menu">
          <li><a href="#home" data-page="home" role="menuitem">Home</a></li>
          <li>
            <a href="#messages" data-page="messages" role="menuitem"
              >Messages</a
            >
          </li>
          <li>
            <a href="#jobs" data-page="jobs" role="menuitem">Jobs Orders</a>
          </li>
          <li>
            <a href="#notifications" data-page="notifications" role="menuitem"
              >Notifications</a
            >
          </li>
          <li>
            <a href="#tracker" data-page="tracker" role="menuitem"
              >Application Tracker</a
            >
          </li>
          <li>
            <a href="#settings" data-page="settings" role="menuitem"
              >Settings</a
            >
          </li>
        </ul>
      </nav>

      <div class="logout">
        <a href="#" data-page="logout">Logout</a>
      </div>
    </aside>

    <div class="main">
      <header class="topbar">
        <div class="user1">Admin User</div>
      </header>

      <main class="content" id="content">
        <!-- Pages -->
        <section id="home" class="page">
           
          <div class="container">
            <h2>Country Distribution</h2>
            <div class="charts-row">
              <div id="piechart"></div>
              <div id="piechart1"></div>
            </div>
          </div>
          
          <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
          <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
          <script>
            google.charts.load('current', {'packages': ['corechart']});
            google.charts.setOnLoadCallback(drawCharts);

            function drawCharts() {
              // Chart 1
              var data1 = google.visualization.arrayToDataTable([
                ['Country', 'Count'],
                ['Japan', 8],
                ['Taiwan', 2],
                ['Kuwait', 4],
                ['Dubai', 2],
                ['Doha Qatar', 8]
              ]);
              var options1 = {'title': 'Country', 'width': 400, 'height': 300};
              var chart1 = new google.visualization.PieChart(document.getElementById('piechart'));
              chart1.draw(data1, options1);

              // Chart 2 (example: different data or same)
              var data2 = google.visualization.arrayToDataTable([
                ['Country', 'Count'],
                ['Domestic Helper', 5],
                ['Nurse', 10],
                ['Factory Worker', 6],
                ['Kitchen Staff', 4],
                ['Electrician', 7]
              ]);
              var options2 = {'title': 'Jobs', 'width': 400, 'height': 300};
              var chart2 = new google.visualization.PieChart(document.getElementById('piechart1'));
              chart2.draw(data2, options2);
            }
          </script>

          <h2>OFW Dashboard</h2>
          <p>Welcome to the Admin dashboard. This is the Home page.</p>

          <select class="filter01">
            <option value="">All OFWs</option>
            <option value="Balik Mangagawa">Balik Mangagawa</option>
            <option value="New Hire">New Hire</option>
          </select>
          <button class="btnA1">Upload Requirements</button>

          <div class="info1">
            <h4>OFW Records</h4>
            <a>List of OFW's and their documents status</a>
          </div>

          <div class="cnA">
            <div class="filters">
              <button class="filter-btn active" data-filter="all">All</button>
              <button class="filter-btn" data-filter="complete">
                Complete
              </button>
              <button class="filter-btn" data-filter="pending">Pending</button>
              <button class="filter-btn" data-filter="incomplete">
                Incomplete
              </button>
              <button class="filter-btn" data-filter="bm">
                Balik Manggagawa
              </button>
            </div>

            <!--searchbar inside home-->
            <div class="searchh1">
              <input type="text" id="search" placeholder="Search OFWs..." />
            </div>

            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Destination</th>
                  <th>Job Title</th>
                  <th>Status</th>
                  <th>Last Updated</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="recordTable">
                <tr data-status="complete bm">
                  <td>Maria Santos <span class="bm-tag">BM</span></td>
                  <td>Dubai, UAE</td>
                  <td>Domestic Helper</td>
                  <td class="status complete">Documents Complete</td>
                  <td>2023-12-15</td>
                  <td class="action"><a href="#">View Details</a></td>
                </tr>
                <tr data-status="incomplete bm">
                  <td>Ana Reyes <span class="bm-tag">BM</span></td>
                  <td>Hong Kong</td>
                  <td>Nurse</td>
                  <td class="status incomplete">Documents Incomplete</td>
                  <td>2023-12-05</td>
                  <td class="action"><a href="#">View Details</a></td>
                </tr>
                <tr data-status="pending">
                  <td>Juan Cruz</td>
                  <td>Qatar</td>
                  <td>Engineer</td>
                  <td class="status pending">Pending</td>
                  <td>2023-12-01</td>
                  <td class="action"><a href="#">View Details</a></td>
                </tr>
              </tbody>
            </table>
          </div>

          <script>
            const filterBtns = document.querySelectorAll(".filter-btn");
            const rows = document.querySelectorAll("#recordTable tr");
            const searchInput = document.getElementById("search");

            filterBtns.forEach((btn) => {
              btn.addEventListener("click", () => {
                filterBtns.forEach((b) => b.classList.remove("active"));
                btn.classList.add("active");

                const filter = btn.dataset.filter;

                rows.forEach((row) => {
                  if (filter === "all" || row.dataset.status.includes(filter)) {
                    row.style.display = "";
                  } else {
                    row.style.display = "none";
                  }
                });
              });
            });

            searchInput.addEventListener("keyup", () => {
              const query = searchInput.value.toLowerCase();
              rows.forEach((row) => {
                const name = row.cells[0].textContent.toLowerCase();
                row.style.display = name.includes(query) ? "" : "none";
              });
            });
          </script>
        </section>

        <section id="messages" class="page">
          <div class="messages-container">
            <div class="messages-list">
              <div class="list-header">
                <h3>Messages</h3>
                <div class="search">
                  <input type="text" placeholder="Search..." />
                  <span
                    ><img src="images/icons/search-icon.svg" alt="Search"
                  /></span>
                </div>
              </div>
              <div class="lists">
                <div class="conversation convo-notif">
                  <img src="images/icons/sample-profile.jpg" alt="" />
                  <div class="details">
                    <div>
                      <h4 class="name">Maria Santos</h4>
                      <span class="time">10:23 AM</span>
                    </div>
                    <p class="chat">I submitted my medical certificate erd</p>
                  </div>
                  <span class="notif notif-active">ðŸ”´</span>
                </div>
                <div class="conversation">
                  <img src="images/icons/sample-profile.jpg" alt="" />
                  <div class="details">
                    <div>
                      <h4 class="name">Juan Dela Cruz</h4>
                      <span class="time">Yesterday</span>
                    </div>
                    <p class="chat">When will my PDOS be scheduled</p>
                  </div>
                  <span class="notif">ðŸ”´</span>
                </div>
                <div class="conversation">
                  <img src="images/icons/sample-profile.jpg" alt="" />
                  <div class="details">
                    <div>
                      <h4 class="name">Ana Reyes</h4>
                      <span class="time">Dec 12</span>
                    </div>
                    <p class="chat">Thank you for helping with my OEC cat</p>
                  </div>
                  <span class="notif">ðŸ”´</span>
                </div>
                <div class="conversation">
                  <img src="images/icons/sample-profile.jpg" alt="" />
                  <div class="details">
                    <div>
                      <h4 class="name">Pedro Lim</h4>
                      <span class="time">Dec 10</span>
                    </div>
                    <p class="chat">My Flight is confirmed for January 15th</p>
                  </div>
                  <span class="notif">ðŸ”´</span>
                </div>
              </div>
            </div>
            <div class="messages-conversation">
              <div class="container">
                <div class="image-container">
                  <img src="images/icons/message-icon.svg" alt="" />
                </div>
                <div class="message-error">
                  <h3>Your Messages</h3>
                  <p>Select a conversation to start messaging</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="jobs" class="page">
          <h2>Jobs Orders</h2>
          <p>Manage job orders here.</p>
        </section>

<div class="container">
    <div class="flex justify-between mb-6">
      <style>
        /* Add your custom styles here */
            body {
      font-family: Arial, sans-serif;
      background: #f9fafb;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1, h2, h3 {
      margin: 0 0 10px 0;
    }
    button {
      cursor: pointer;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .flex {
      display: flex;
      align-items: center;
    }
    .space-x-2 > * + * {
      margin-left: 8px;
    }
    .space-y-4 > * + * {
      margin-top: 16px;
    }
    .btn {
      padding: 8px 12px;
      border-radius: 4px;
      border: 1px solid #ccc;
      background: white;
      font-size: 14px;
      transition: background-color 0.2s;
    }
    .btn:hover {
      background-color: #eee;
    }
    .btn-primary {
      background-color: #dc2626;
      color: white;
      border: none;
    }
    .btn-primary:hover {
      background-color: #b91c1c;
    }
    .btn-secondary {
      background-color: #f3f4f6;
      border: none;
      color: #555;
    }
    .btn-secondary:hover {
      background-color: #e5e7eb;
    }
    input[type="text"], input[type="number"], input[type="email"], input[type="date"], select, textarea {
      width: 100%;
      padding: 6px 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    th, td {
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
      text-align: left;
      font-size: 14px;
    }
    th {
      background: #f3f4f6;
      font-weight: 600;
      color: #555;
    }
    tr:hover {
      background-color: #f9fafb;
    }
    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      color: white;
    }
    .badge-active {
      background-color: #22c55e;
    }
    .badge-pending {
      background-color: #eab308;
    }
    .badge-closed {
      background-color: #6b7280;
    }
    /* Modal styles */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-overlay.active {
      display: flex;
    }
    .modal {
      background: white;
      border-radius: 8px;
      max-width: 800px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      padding: 20px;
      box-sizing: border-box;
      position: relative;
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      line-height: 1;
      cursor: pointer;
      color: #999;
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
    }
    .flex-wrap {
      flex-wrap: wrap;
    }
    .flex-col {
      flex-direction: column;
    }
    .list-disc {
      list-style-type: disc;
      padding-left: 20px;
    }
    .list-inside {
      list-style-position: inside;
    }
    .text-red {
      color: #dc2626;
    }
    .text-gray {
      color: #6b7280;
    }
    .text-sm {
      font-size: 12px;
    }
    .text-lg {
      font-size: 18px;
    }
    .mb-2 {
      margin-bottom: 8px;
    }
    .mb-4 {
      margin-bottom: 16px;
    }
    .mb-6 {
      margin-bottom: 24px;
    }
    .cursor-pointer {
      cursor: pointer;
    }
      </style>
      <button id="btnFilter" class="btn btn-secondary">Filter</button>
      <button id="btnAddJob" class="btn btn-primary">Add New Job Order</button>
    </div>

    <div class="flex space-x-2 mb-4">
      <button class="btn btn-secondary filter-btn active" data-filter="all">All</button>
      <button class="btn btn-secondary filter-btn" data-filter="active">Active</button>
      <button class="btn btn-secondary filter-btn" data-filter="pending approval">Pending</button>
      <button class="btn btn-secondary filter-btn" data-filter="closed">Closed</button>
      <input type="text" id="searchInput" placeholder="Search job orders..." style="flex:1;"/>
    </div>

    <table id="jobTable">
      <thead>
        <tr>
          <th>Job Order ID</th>
          <th>Position</th>
          <th>Employer</th>
          <th>Location</th>
          <th>Vacancies</th>
          <th>Status</th>
          <th>Deadline</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <!-- Job rows inserted here -->
      </tbody>
    </table>
  </div>

  <!-- Job Details Modal -->
  <div id="modalOverlay" class="modal-overlay">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-header">
        <h2 id="modalTitle">Job Details</h2>
        <button id="modalClose" class="modal-close" aria-label="Close modal">&times;</button>
      </div>
      <div id="modalContent">
        <!-- Job details inserted here -->
      </div>
    </div>
  </div>

  <!-- Add/Edit Job Modal -->
  <div id="modalAddEditOverlay" class="modal-overlay">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalAddEditTitle">
      <div class="modal-header">
        <h2 id="modalAddEditTitle">Add New Job Order</h2>
        <button id="modalAddEditClose" class="modal-close" aria-label="Close modal">&times;</button>
      </div>
      <form id="jobForm">
        <div class="form-group">
          <label for="positionInput">Position Title*</label>
          <input type="text" id="positionInput" name="position" required />
        </div>
        <div class="form-group">
          <label for="employerInput">Employer/Company*</label>
          <input type="text" id="employerInput" name="employer" required />
        </div>
        <div class="form-group">
          <label for="countryInput">Country*</label>
          <input type="text" id="countryInput" name="country" required />
        </div>
        <div class="form-group">
          <label for="salaryInput">Salary Range*</label>
          <input type="text" id="salaryInput" name="salary" required placeholder="e.g. $1,200 - $1,500" />
        </div>
        <div class="form-group">
          <label for="vacanciesInput">Number of Vacancies*</label>
          <input type="number" id="vacanciesInput" name="vacancies" min="1" required />
        </div>
        <div class="form-group">
          <label for="deadlineInput">Application Deadline*</label>
          <input type="date" id="deadlineInput" name="deadline" required />
        </div>
        <div class="form-group">
          <label for="statusInput">Status*</label>
          <select id="statusInput" name="status" required>
            <option value="Active">Active</option>
            <option value="Pending Approval">Pending Approval</option>
            <option value="Closed">Closed</option>
          </select>
        </div>
        <div class="form-group">
          <label for="descriptionInput">Job Description*</label>
          <textarea id="descriptionInput" name="description" rows="4" required></textarea>
        </div>
        <div class="form-group">
          <label for="contactPersonInput">Contact Person*</label>
          <input type="text" id="contactPersonInput" name="contactPerson" required />
        </div>
        <div class="form-group">
          <label for="contactEmailInput">Contact Email*</label>
          <input type="email" id="contactEmailInput" name="contactEmail" required />
        </div>
        <div class="form-group">
          <label for="contactPhoneInput">Contact Phone*</label>
          <input type="text" id="contactPhoneInput" name="contactPhone" required />
        </div>
        <div style="text-align: right;">
          <button type="button" id="cancelAddEdit" class="btn btn-secondary">Cancel</button>
          <button type="submit" class="btn btn-primary" id="submitJobBtn">Create Job Order</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Mock job orders data
    let jobOrders = [
      {
        id: 'JO-2023-001',
        employer: 'Al Faisal Hospital',
        country: 'Saudi Arabia',
        position: 'Registered Nurse',
        vacancies: 25,
        salary: '$1,200 - $1,500',
        status: 'Active',
        applicants: 18,
        deadline: '2024-01-30',
        datePosted: '2023-12-01',
        requirements: [
          'Bachelor of Science in Nursing',
          'At least 2 years of hospital experience',
          'PROMETRIC or HAAD exam passer',
          'Valid nursing license',
        ],
        benefits: [
          'Free accommodation',
          'Transportation allowance',
          'Medical insurance',
          'Annual vacation with airfare',
          '30 days paid leave annually',
        ],
        description:
          'Al Faisal Hospital is seeking qualified Registered Nurses to join their expanding healthcare facility in Riyadh, Saudi Arabia. The candidate will be responsible for providing quality nursing care to patients, administering medications, and assisting doctors during procedures.',
        contactPerson: 'Mohammed Al-Harbi',
        contactEmail: 'recruitment@alfaisalhospital.sa',
        contactPhone: '+966-11-234-5678',
      },
      {
        id: 'JO-2023-002',
        employer: 'Marina Bay Hotels & Resorts',
        country: 'Singapore',
        position: 'Hotel Housekeeping Staff',
        vacancies: 15,
        salary: 'SGD 1,400 - SGD 1,600',
        status: 'Active',
        applicants: 32,
        deadline: '2024-01-15',
        datePosted: '2023-11-25',
        requirements: [
          'High school graduate',
          'At least 1 year experience in hotel housekeeping',
          'Good command of English',
          'Customer service oriented',
        ],
        benefits: [
          'Free meals during duty',
          'Accommodation assistance',
          'Medical benefits',
          'Annual performance bonus',
          'Training opportunities',
        ],
        description:
          'Marina Bay Hotels & Resorts is looking for dedicated Housekeeping Staff to maintain the cleanliness and presentation of our 5-star hotel rooms and facilities. The ideal candidate has attention to detail and excellent customer service skills.',
        contactPerson: 'Grace Lim',
        contactEmail: 'careers@marinabayhotels.sg',
        contactPhone: '+65-6789-1234',
      },
     
    ];

    let filteredJobs = [...jobOrders];
    let currentFilter = 'all';
    let searchTerm = '';
    let editingJobId = null;

    const jobTableBody = document.querySelector('#jobTable tbody');
    const filterButtons = document.querySelectorAll('.filter-btn');
    const jobSearchInput = document.getElementById('searchInput');
    const modalOverlay = document.getElementById('modalOverlay');
    const modalContent = document.getElementById('modalContent');
    const modalClose = document.getElementById('modalClose');
    const btnAddJob = document.getElementById('btnAddJob');
    const modalAddEditOverlay = document.getElementById('modalAddEditOverlay');
    const modalAddEditClose = document.getElementById('modalAddEditClose');
    const jobForm = document.getElementById('jobForm');
    const cancelAddEdit = document.getElementById('cancelAddEdit');
    const modalAddEditTitle = document.getElementById('modalAddEditTitle');
    const submitJobBtn = document.getElementById('submitJobBtn');

    // create status 
    function createStatusBadge(status) {
      const span = document.createElement('span');
      span.classList.add('badge');
      if (status.toLowerCase() === 'active') {
        span.classList.add('badge-active');
        span.textContent = 'Active';
      } else if (status.toLowerCase() === 'pending approval') {
        span.classList.add('badge-pending');
        span.textContent = 'Pending Approval';
      } else {
        span.classList.add('badge-closed');
        span.textContent = 'Closed';
      }
      return span;
    }

    // Render job orders table rows
    function renderJobTable() {
      jobTableBody.innerHTML = '';
      filteredJobs.forEach(job => {
        const tr = document.createElement('tr');
        tr.classList.add('cursor-pointer');
        tr.addEventListener('click', () => openJobDetails(job.id));

        tr.innerHTML = `
          <td>${job.id}</td>
          <td>${job.position}</td>
          <td>${job.employer}</td>
          <td>${job.country}</td>
          <td>${job.vacancies}</td>
          <td></td>
          <td>${job.deadline}</td>
          <td><button class="btn btn-secondary btn-view" data-id="${job.id}">View</button></td>
        `;

        // Insert status badge
        const statusTd = tr.children[5];
        statusTd.appendChild(createStatusBadge(job.status));

        // Prevent row click when clicking the button
        tr.querySelector('.btn-view').addEventListener('click', e => {
          e.stopPropagation();
          openJobDetails(job.id);
        });

        jobTableBody.appendChild(tr);
      });
    }

    // Filter and search jobs
    function filterAndSearchJobs() {
      filteredJobs = jobOrders.filter(job => {
        if (currentFilter !== 'all' && job.status.toLowerCase() !== currentFilter) {
          return false;
        }
        if (searchTerm) {
          const term = searchTerm.toLowerCase();
          return (
            job.position.toLowerCase().includes(term) ||
            job.employer.toLowerCase().includes(term) ||
            job.country.toLowerCase().includes(term)
          );
        }
        return true;
      });
      renderJobTable();
    }

    // Open job details modal
    function openJobDetails(jobId) {
      const job = jobOrders.find(j => j.id === jobId);
      if (!job) return;
      modalContent.innerHTML = `
        <h3>${job.position} - ${job.employer}</h3>
        <p><strong>Location:</strong> ${job.country}</p>
        <p><strong>Vacancies:</strong> ${job.vacancies}</p>
        <p><strong>Salary:</strong> ${job.salary}</p>
        <p><strong>Status:</strong> ${job.status}</p>
        <p><strong>Deadline:</strong> ${job.deadline}</p>
        <h4>Description</h4>
        <p>${job.description}</p>
        <h4>Requirements</h4>
        <ul>${job.requirements.map(r => `<li>${r}</li>`).join('')}</ul>
        <h4>Benefits</h4>
        <ul>${job.benefits.map(b => `<li>${b}</li>`).join('')}</ul>
        <h4>Contact Information</h4>
        <p><strong>Person:</strong> ${job.contactPerson}</p>
        <p><strong>Email:</strong> ${job.contactEmail}</p>
        <p><strong>Phone:</strong> ${job.contactPhone}</p>
      `;
      modalOverlay.classList.add('active');
    }

    // Close modals
    function closeModal() {
      modalOverlay.classList.remove('active');
      modalAddEditOverlay.classList.remove('active');
      editingJobId = null;
      jobForm.reset();
      modalAddEditTitle.textContent = 'Add New Job Order';
      submitJobBtn.textContent = 'Create Job Order';
    }

    // Open add/edit modal
    function openAddEditModal(editJob = null) {
      if (editJob) {
        editingJobId = editJob.id;
        modalAddEditTitle.textContent = 'Edit Job Order';
        submitJobBtn.textContent = 'Update Job Order';
        jobForm.position.value = editJob.position;
        jobForm.employer.value = editJob.employer;
        jobForm.country.value = editJob.country;
        jobForm.salary.value = editJob.salary;
        jobForm.vacancies.value = editJob.vacancies;
        jobForm.deadline.value = editJob.deadline;
        jobForm.status.value = editJob.status;
        jobForm.description.value = editJob.description;
        jobForm.contactPerson.value = editJob.contactPerson;
        jobForm.contactEmail.value = editJob.contactEmail;
        jobForm.contactPhone.value = editJob.contactPhone;
      } else {
        editingJobId = null;
        jobForm.reset();
        modalAddEditTitle.textContent = 'Add New Job Order';
        submitJobBtn.textContent = 'Create Job Order';
      }
      modalAddEditOverlay.classList.add('active');
    }

    // Event listeners
    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        filterButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentFilter = btn.dataset.filter.toLowerCase();
        filterAndSearchJobs();
      });
    });

    jobSearchInput.addEventListener('input', e => {
      searchTerm = e.target.value;
      filterAndSearchJobs();
    });

    modalClose.addEventListener('click', closeModal);
    modalOverlay.addEventListener('click', e => {
      if (e.target === modalOverlay) closeModal();
    });

    btnAddJob.addEventListener('click', () => openAddEditModal());
    modalAddEditClose.addEventListener('click', closeModal);
    cancelAddEdit.addEventListener('click', closeModal);
    modalAddEditOverlay.addEventListener('click', e => {
      if (e.target === modalAddEditOverlay) closeModal();
    });

    jobForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const newJob = {
        id: editingJobId ? editingJobId : `JO-${Date.now()}`,
        position: jobForm.position.value,
        employer: jobForm.employer.value,
        country: jobForm.country.value,
        salary: jobForm.salary.value,
        vacancies: parseInt(jobForm.vacancies.value, 10),
        status: jobForm.status.value,
        deadline: jobForm.deadline.value,
        description: jobForm.description.value,
        contactPerson: jobForm.contactPerson.value,
        contactEmail: jobForm.contactEmail.value,
        contactPhone: jobForm.contactPhone.value,
        requirements: [],
        benefits: [],
        applicants: 0,
        datePosted: new Date().toISOString().split('T')[0]
      };
      if (editingJobId) {
        const idx = jobOrders.findIndex(j => j.id === editingJobId);
        if (idx !== -1) jobOrders[idx] = newJob;
      } else {
        jobOrders.push(newJob);
      }
      filterAndSearchJobs();
      closeModal();
    });

    // Initial render
    filterAndSearchJobs();
    
    </script>

        <section id="reports" class="page"></section>

        <section id="notifications" class="page">
          <h2>Notifications</h2>
          <p>Your notifications appear here.</p>
        </section>

        <section id="tracker" class="page">
          <h2>Application Tracker</h2>
          <p>Track applications here.</p>
        </section>

        <section id="settings" class="page">
          <h2>Settings</h2>
          <p>Manage settings here.</p>
        </section>
      </main>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const navLinks = document.querySelectorAll(".Alist a");
        const pages = document.querySelectorAll(".page");

        function activate(pageId) {
          // hide all pages
          pages.forEach((p) => p.classList.remove("active"));
          // show page if exists
          const target = document.getElementById(pageId);
          if (target) target.classList.add("active");

          // set active class on nav links
          navLinks.forEach((link) => {
            link.classList.toggle("active", link.dataset.page === pageId);
          });
        }

        // click
        navLinks.forEach((link) => {
          link.addEventListener("click", function (e) {
            e.preventDefault(); // prevent default anchor navigation
            const page = this.dataset.page || "home";
            // push hash so the back button works
            location.hash = page;
            activate(page);
          });
        });

        // handle back/forward via hashchange
        window.addEventListener("hashchange", () => {
          const hash = location.hash.replace("#", "") || "home";
          activate(hash);
        });

        // initial
        const initial = location.hash.replace("#", "") || "home";
        activate(initial);
      });
    </script>
  </body>
</html>
